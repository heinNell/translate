<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="AI-powered Afrikaans to English translator with chat, email formatting, and content enhancement features">
    <meta name="theme-color" content="#2563eb">
    <title>AI Assistant - Translate, Chat & More</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Markdown rendering -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- Syntax highlighting for code -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
</head>
<body>
    <!-- Skip Link for Accessibility -->
    <a href="#inputText" class="skip-link" id="skip-link">Skip to main content</a>
    
    <!-- ARIA Live Region for Screen Reader Announcements -->
    <div id="aria-live-region" aria-live="polite" aria-atomic="true" class="sr-only"></div>
    
    <!-- Mode Sidebar (Page Selection) -->
    <aside class="mode-sidebar" id="modeSidebar" role="navigation" aria-label="Mode navigation">
        <div class="mode-sidebar-header">
            <div class="mode-sidebar-logo" aria-hidden="true">
                <svg viewBox="0 0 24 24" width="28" height="28" fill="currentColor">
                    <path d="M12.87 15.07l-2.54-2.51.03-.03A17.52 17.52 0 0014.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/>
                </svg>
            </div>
        </div>
        <nav class="mode-sidebar-nav" role="tablist" aria-label="Application modes">
            <button class="mode-sidebar-btn" id="chatMode" data-mode="chat" title="Chat" role="tab" aria-selected="false" aria-controls="chatContainer">
                <svg viewBox="0 0 24 24" width="22" height="22" fill="currentColor" aria-hidden="true">
                    <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"/>
                </svg>
                <span class="mode-sidebar-label">Chat</span>
            </button>
            <button class="mode-sidebar-btn active" id="translateMode" data-mode="translate" title="Translate">
                <svg viewBox="0 0 24 24" width="22" height="22" fill="currentColor">
                    <path d="M12.87 15.07l-2.54-2.51.03-.03A17.52 17.52 0 0014.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/>
                </svg>
                <span class="mode-sidebar-label">Translate</span>
            </button>
            <button class="mode-sidebar-btn" id="enhanceMode" data-mode="enhance" title="Enhance">
                <svg viewBox="0 0 24 24" width="22" height="22" fill="currentColor">
                    <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                </svg>
                <span class="mode-sidebar-label">Enhance</span>
            </button>
            <button class="mode-sidebar-btn" id="emailMode" data-mode="email" title="Email">
                <svg viewBox="0 0 24 24" width="22" height="22" fill="currentColor">
                    <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                </svg>
                <span class="mode-sidebar-label">Email</span>
            </button>
            <button class="mode-sidebar-btn" id="agentMode" data-mode="agent" title="Ask AI">
                <svg viewBox="0 0 24 24" width="22" height="22" fill="currentColor">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"/>
                </svg>
                <span class="mode-sidebar-label">Ask AI</span>
            </button>
            <button class="mode-sidebar-btn" id="strategyMode" data-mode="strategy" title="Strategy">
                <svg viewBox="0 0 24 24" width="22" height="22" fill="currentColor">
                    <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                </svg>
                <span class="mode-sidebar-label">Strategy</span>
            </button>
        </nav>
        
        <div class="mode-sidebar-footer">
            <button class="mode-sidebar-settings" id="settingsBtnSidebar" title="Settings">
                <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                    <path d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
                </svg>
            </button>
            <button class="mode-sidebar-theme" id="themeToggleSidebar" title="Toggle Theme">
                <svg class="theme-icon-light" viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                    <path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1z"/>
                </svg>
                <svg class="theme-icon-dark" viewBox="0 0 24 24" width="20" height="20" fill="currentColor" style="display:none;">
                    <path d="M9.5,2c-1.82,0-3.53,0.5-5,1.35c2.99,1.73,5,4.95,5,8.65s-2.01,6.92-5,8.65C5.97,21.5,7.68,22,9.5,22c5.52,0,10-4.48,10-10S15.02,2,9.5,2z"/>
                </svg>
            </button>
        </div>
    </aside>

    <!-- Conversation Sidebar -->
    <aside class="chat-sidebar" id="chatSidebar">
        <div class="sidebar-header">
            <h2>Conversations</h2>
            <div class="sidebar-header-actions">
                <button class="theme-toggle-btn" id="themeToggleBtn" title="Toggle Dark/Light Mode">
                    <svg class="theme-icon-light" viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
                        <path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1z"/>
                    </svg>
                    <svg class="theme-icon-dark" viewBox="0 0 24 24" width="18" height="18" fill="currentColor" style="display:none;">
                        <path d="M9.5,2c-1.82,0-3.53,0.5-5,1.35c2.99,1.73,5,4.95,5,8.65s-2.01,6.92-5,8.65C5.97,21.5,7.68,22,9.5,22c5.52,0,10-4.48,10-10S15.02,2,9.5,2z"/>
                    </svg>
                </button>
                <button class="new-chat-btn" id="newChatBtn" title="New Chat">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                    </svg>
                </button>
            </div>
        </div>
        <div class="sidebar-search">
            <input type="text" id="chatSearchInput" placeholder="Search conversations...">
        </div>
        <div class="conversations-list" id="conversationsList">
            <!-- Conversations will be populated dynamically -->
        </div>
        <div class="sidebar-stats" id="sidebarStats">
            <div class="stat-item">
                <span class="stat-label">Total Tokens</span>
                <span class="stat-value" id="totalTokensUsed">0</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Conversations</span>
                <span class="stat-value" id="totalConversations">0</span>
            </div>
        </div>
        <div class="sidebar-footer">
            <button class="sidebar-action-btn" id="exportChatsBtn" title="Export All Chats">
                <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
                    <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                </svg>
                Export
            </button>
            <button class="sidebar-action-btn" id="exportPdfBtn" title="Export as PDF">
                <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
                    <path d="M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-8.5 7.5c0 .83-.67 1.5-1.5 1.5H9v2H7.5V7H10c.83 0 1.5.67 1.5 1.5v1zm5 2c0 .83-.67 1.5-1.5 1.5h-2.5V7H15c.83 0 1.5.67 1.5 1.5v3zm4-3H19v1h1.5V11H19v2h-1.5V7h3v1.5zM9 9.5h1v-1H9v1zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm10 5.5h1v-3h-1v3z"/>
                </svg>
                PDF
            </button>
            <button class="sidebar-action-btn" id="keyboardShortcutsBtn" title="Keyboard Shortcuts">
                <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
                    <path d="M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2V8zm0 3h2v2h-2v-2zM8 8h2v2H8V8zm0 3h2v2H8v-2zm-1 2H5v-2h2v2zm0-3H5V8h2v2zm9 7H8v-2h8v2zm0-4h-2v-2h2v2zm0-3h-2V8h2v2zm3 3h-2v-2h2v2zm0-3h-2V8h2v2z"/>
                </svg>
            </button>
        </div>
    </aside>

    <!-- Keyboard Shortcuts Modal -->
    <div class="shortcuts-modal" id="shortcutsModal" style="display: none;">
        <div class="shortcuts-content">
            <div class="shortcuts-header">
                <h3>‚å®Ô∏è Keyboard Shortcuts</h3>
                <button class="close-shortcuts-btn" id="closeShortcutsBtn">√ó</button>
            </div>
            <div class="shortcuts-list">
                <div class="shortcut-item">
                    <span class="shortcut-keys"><kbd>Ctrl</kbd> + <kbd>Enter</kbd></span>
                    <span class="shortcut-desc">Send message</span>
                </div>
                <div class="shortcut-item">
                    <span class="shortcut-keys"><kbd>Ctrl</kbd> + <kbd>N</kbd></span>
                    <span class="shortcut-desc">New conversation</span>
                </div>
                <div class="shortcut-item">
                    <span class="shortcut-keys"><kbd>Ctrl</kbd> + <kbd>B</kbd></span>
                    <span class="shortcut-desc">Toggle sidebar</span>
                </div>
                <div class="shortcut-item">
                    <span class="shortcut-keys"><kbd>Ctrl</kbd> + <kbd>K</kbd></span>
                    <span class="shortcut-desc">Search conversations</span>
                </div>
                <div class="shortcut-item">
                    <span class="shortcut-keys"><kbd>Escape</kbd></span>
                    <span class="shortcut-desc">Stop generation / Close modal</span>
                </div>
                <div class="shortcut-item">
                    <span class="shortcut-keys"><kbd>/</kbd></span>
                    <span class="shortcut-desc">Open command menu</span>
                </div>
                <div class="shortcut-item">
                    <span class="shortcut-keys"><kbd>Ctrl</kbd> + <kbd>D</kbd></span>
                    <span class="shortcut-desc">Toggle dark mode</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Slash Commands Menu -->
    <div class="slash-commands-menu" id="slashCommandsMenu" style="display: none;">
        <div class="slash-commands-header">Commands</div>
        <div class="slash-commands-list">
            <div class="slash-command-item" data-command="/clear">
                <span class="command-icon">üóëÔ∏è</span>
                <div class="command-info">
                    <span class="command-name">/clear</span>
                    <span class="command-desc">Clear current conversation</span>
                </div>
            </div>
            <div class="slash-command-item" data-command="/system">
                <span class="command-icon">‚öôÔ∏è</span>
                <div class="command-info">
                    <span class="command-name">/system</span>
                    <span class="command-desc">Edit system prompt</span>
                </div>
            </div>
            <div class="slash-command-item" data-command="/export">
                <span class="command-icon">üì§</span>
                <div class="command-info">
                    <span class="command-name">/export</span>
                    <span class="command-desc">Export conversation</span>
                </div>
            </div>
            <div class="slash-command-item" data-command="/model">
                <span class="command-icon">ü§ñ</span>
                <div class="command-info">
                    <span class="command-name">/model</span>
                    <span class="command-desc">Change AI model</span>
                </div>
            </div>
            <div class="slash-command-item" data-command="/summarize">
                <span class="command-icon">üìù</span>
                <div class="command-info">
                    <span class="command-name">/summarize</span>
                    <span class="command-desc">Summarize conversation</span>
                </div>
            </div>
            <div class="slash-command-item" data-command="/fork">
                <span class="command-icon">üåø</span>
                <div class="command-info">
                    <span class="command-name">/fork</span>
                    <span class="command-desc">Fork conversation from here</span>
                </div>
            </div>
            <div class="slash-command-item" data-command="/code">
                <span class="command-icon">üíª</span>
                <div class="command-info">
                    <span class="command-name">/code</span>
                    <span class="command-desc">Code assistant mode</span>
                </div>
            </div>
            <div class="slash-command-item" data-command="/translate">
                <span class="command-icon">üåê</span>
                <div class="command-info">
                    <span class="command-name">/translate</span>
                    <span class="command-desc">Translation mode</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Sidebar Toggle Button -->
    <button class="sidebar-toggle" id="sidebarToggle" title="Toggle Sidebar">
        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
        </svg>
    </button>

    <div class="container">
        <header class="header">
            <div class="logo">
                <svg class="logo-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12.87 15.07l-2.54-2.51.03-.03A17.52 17.52 0 0014.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z" fill="currentColor"/>
                </svg>
                <h1>AI Assistant</h1>
            </div>
            <p class="tagline">Chat, Translate, Enhance & Strategize with AI</p>
        </header>

        <main class="translator">
            <!-- Chat Interface (New) -->
            <div class="chat-container" id="chatContainer" style="display: none;">
                <!-- Chat Header Bar -->
                <div class="chat-header-bar">
                    <div class="chat-header-left">
                        <span class="chat-title" id="currentChatTitle">New Conversation</span>
                        <span class="chat-model-badge" id="currentModelBadge">Claude 3.5</span>
                    </div>
                    <div class="chat-header-actions">
                        <button class="chat-header-btn" id="bookmarkChatBtn" title="Bookmark conversation">
                            <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
                                <path d="M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2z"/>
                            </svg>
                        </button>
                        <button class="chat-header-btn" id="forkChatBtn" title="Fork conversation">
                            <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
                                <path d="M6 2c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6H6zm7 7V3.5L18.5 9H13z"/>
                            </svg>
                        </button>
                        <button class="chat-header-btn" id="shareChatBtn" title="Share conversation">
                            <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
                                <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z"/>
                            </svg>
                        </button>
                        <div class="token-display" id="conversationTokens">
                            <svg viewBox="0 0 24 24" width="14" height="14" fill="currentColor">
                                <path d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"/>
                            </svg>
                            <span id="tokenCountDisplay">0</span>
                        </div>
                    </div>
                </div>

                <!-- System Prompt Configuration -->
                <div class="system-prompt-panel" id="systemPromptPanel">
                    <div class="system-prompt-header">
                        <span class="system-prompt-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
                            </svg>
                            System Prompt
                        </span>
                        <button class="toggle-prompt-btn" id="togglePromptBtn" title="Toggle System Prompt">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
                            </svg>
                        </button>
                    </div>
                    <div class="system-prompt-content" id="systemPromptContent">
                        <textarea id="systemPromptInput" class="system-prompt-textarea" placeholder="Enter a custom system prompt to define the AI's behavior...&#10;&#10;Examples:&#10;‚Ä¢ You are a helpful coding assistant&#10;‚Ä¢ You are a creative writing partner&#10;‚Ä¢ You are a professional translator"></textarea>
                        <div class="prompt-templates">
                            <span class="templates-label">Quick Templates:</span>
                            <button class="template-btn" data-template="general">General Assistant</button>
                            <button class="template-btn" data-template="coder">Code Expert</button>
                            <button class="template-btn" data-template="writer">Creative Writer</button>
                            <button class="template-btn" data-template="analyst">Data Analyst</button>
                            <button class="template-btn" data-template="translator">Translator</button>
                        </div>
                    </div>
                </div>

                <!-- Chat Messages Area -->
                <div class="chat-messages" id="chatMessages">
                    <div class="chat-welcome" id="chatWelcome">
                        <div class="welcome-animation">
                            <div class="welcome-icon">
                                <svg viewBox="0 0 24 24" width="64" height="64" fill="currentColor">
                                    <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"/>
                                </svg>
                                <div class="welcome-sparkles">
                                    <span class="sparkle">‚ú®</span>
                                    <span class="sparkle">‚ú®</span>
                                    <span class="sparkle">‚ú®</span>
                                </div>
                            </div>
                        </div>
                        <h2>Hello! I'm your AI Assistant</h2>
                        <p>Type <kbd>/</kbd> for commands, or ask me anything!</p>
                        <div class="suggested-prompts">
                            <button class="suggested-btn" data-prompt="Explain how neural networks work in simple terms">
                                <span class="suggested-icon">üß†</span>
                                <span>Explain neural networks</span>
                            </button>
                            <button class="suggested-btn" data-prompt="Write a professional email template for following up with a client">
                                <span class="suggested-icon">üìß</span>
                                <span>Email template</span>
                            </button>
                            <button class="suggested-btn" data-prompt="Help me debug and optimize this code">
                                <span class="suggested-icon">üêõ</span>
                                <span>Debug code</span>
                            </button>
                            <button class="suggested-btn" data-prompt="Create a business strategy outline for a startup">
                                <span class="suggested-icon">üìä</span>
                                <span>Business strategy</span>
                            </button>
                        </div>
                        <div class="welcome-tips">
                            <p class="tips-title">üí° Pro Tips:</p>
                            <ul>
                                <li>Use <kbd>Ctrl</kbd>+<kbd>Enter</kbd> to send messages</li>
                                <li>Upload images for visual analysis</li>
                                <li>Type <kbd>/fork</kbd> to branch the conversation</li>
                            </ul>
                        </div>
                    </div>
                    <!-- Messages will be inserted here -->
                </div>

                <!-- Follow-up Suggestions Area -->
                <div class="followup-suggestions" id="followupSuggestions" style="display: none;">
                    <span class="followup-label">Continue with:</span>
                    <div class="followup-buttons" id="followupButtons">
                        <!-- Will be populated dynamically -->
                    </div>
                </div>

                <!-- Image Preview Area -->
                <div class="image-preview-container" id="imagePreviewContainer" style="display: none;">
                    <div class="image-preview-wrapper">
                        <img id="imagePreview" src="" alt="Preview">
                        <button class="remove-image-btn" id="removeImageBtn" title="Remove image">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Chat Input Area -->
                <div class="chat-input-container">
                    <!-- Slash Commands Menu -->
                    <div class="slash-commands-menu" id="slashCommandsMenu">
                        <!-- Will be populated dynamically -->
                    </div>
                    
                    <div class="chat-input-wrapper">
                        <button class="chat-action-btn" id="chatImageBtn" title="Upload image (Vision models)">
                            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                                <path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>
                            </svg>
                        </button>
                        <input type="file" id="chatImageInput" accept="image/*" style="display: none;">
                        <button class="chat-action-btn" id="chatAttachBtn" title="Attach file">
                            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                                <path d="M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z"/>
                            </svg>
                        </button>
                        <textarea 
                            id="chatInput" 
                            class="chat-textarea" 
                            placeholder="Type a message... (/ for commands, Ctrl+Enter to send)"
                            rows="1"
                        ></textarea>
                        <button class="chat-action-btn" id="chatMicBtn" title="Voice input">
                            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                                <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
                                <path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
                            </svg>
                        </button>
                        <button class="chat-send-btn" id="chatSendBtn" title="Send message (Ctrl+Enter)">
                            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                            </svg>
                        </button>
                    </div>
                    <div class="chat-info">
                        <span class="token-counter" id="tokenCounter">0 tokens</span>
                        <button class="stop-generation-btn" id="stopGenerationBtn" style="display: none;">
                            <svg viewBox="0 0 24 24" width="14" height="14" fill="currentColor">
                                <path d="M6 6h12v12H6z"/>
                            </svg>
                            Stop
                        </button>
                    </div>
                </div>
            </div>

            <div class="translation-container" id="translationContainer">
                <!-- Input Section -->
                <div class="panel input-panel">
                    <div class="panel-header">
                        <span class="language-label" id="inputLabel">Afrikaans</span>
                        <div class="panel-actions">
                            <button class="action-btn" id="micBtn" title="Speech to text">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z" fill="currentColor"/>
                                    <path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z" fill="currentColor"/>
                                </svg>
                            </button>
                            <button class="action-btn" id="clearBtn" title="Clear text">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z" fill="currentColor"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <textarea 
                        id="inputText" 
                        class="text-area" 
                        placeholder="Enter Afrikaans text here...&#10;&#10;Examples:&#10;‚Ä¢ Hoe gaan dit met jou?&#10;‚Ä¢ Ek is lief vir jou&#10;‚Ä¢ Baie dankie vir jou hulp"
                        rows="8"
                        aria-label="Enter Afrikaans text to translate"
                        aria-describedby="charCount"
                    ></textarea>
                    <div class="char-count">
                        <span id="charCount">0</span> / 5000 characters
                    </div>
                </div>

                <!-- Translate Button -->
                <div class="translate-section">
                    <div class="action-model-row">
                        <button class="translate-btn" id="translateBtn" aria-label="Translate text">
                            <span class="btn-text">Translate</span>
                            <svg class="btn-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8-8-8z" fill="currentColor"/>
                            </svg>
                            <div class="btn-loader" id="btnLoader" aria-hidden="true"></div>
                        </button>
                    </div>
                </div>

                <!-- Output Section -->
                <div class="panel output-panel">
                    <div class="panel-header">
                        <span class="language-label" id="outputLabel">English</span>
                        <div class="panel-actions">
                            <button class="action-btn" id="copyBtn" title="Copy translation" aria-label="Copy translation to clipboard">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                    <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z" fill="currentColor"/>
                                </svg>
                            </button>
                            <button class="action-btn" id="speakBtn" title="Listen to translation" aria-label="Read translation aloud">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                    <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z" fill="currentColor"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="output-area" id="outputArea" role="region" aria-label="Translation result" aria-live="polite">
                        <div class="placeholder-text">
                            Translation will appear here...
                        </div>
                    </div>
                </div>
            </div>

            <!-- Enhancement Results Section -->
            <div class="enhancement-section" id="enhancementSection">
                <div class="enhancement-card">
                    <h3 class="enhancement-title">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" width="20" height="20">
                            <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z" fill="currentColor"/>
                        </svg>
                        Text Enhancement Results
                    </h3>

                    <!-- Enhanced Text -->
                    <div class="enhancement-item" id="enhancedTextSection">
                        <span class="enhancement-label">Enhanced Version:</span>
                        <div class="enhanced-text-box" id="enhancedText"></div>
                        <button class="copy-enhanced-btn" id="copyEnhancedBtn" title="Copy enhanced text">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                            </svg>
                            Copy
                        </button>
                    </div>

                    <!-- Structure Improvements -->
                    <div class="enhancement-item" id="structureSection">
                        <span class="enhancement-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="vertical-align: middle; margin-right: 4px;">
                                <path d="M3 18h6v-2H3v2zM3 6v2h18V6H3zm0 7h12v-2H3v2z"/>
                            </svg>
                            Structure Improvements:
                        </span>
                        <ul class="structure-list" id="structureList"></ul>
                    </div>

                    <!-- Suggested Additions -->
                    <div class="enhancement-item" id="additionsSection">
                        <span class="enhancement-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="vertical-align: middle; margin-right: 4px;">
                                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                            </svg>
                            Suggested Additions:
                        </span>
                        <div class="additions-container" id="additionsList"></div>
                    </div>

                    <!-- Enhancement Ideas -->
                    <div class="enhancement-item" id="ideasSection">
                        <span class="enhancement-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="vertical-align: middle; margin-right: 4px;">
                                <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7z"/>
                            </svg>
                            Ideas to Enhance Information:
                        </span>
                        <div class="ideas-container" id="ideasList"></div>
                    </div>

                    <!-- Alternative Versions -->
                    <div class="enhancement-item" id="versionsSection">
                        <span class="enhancement-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="vertical-align: middle; margin-right: 4px;">
                                <path d="M16.01 11H4v2h12.01v3L20 12l-3.99-4z"/>
                            </svg>
                            Alternative Versions:
                        </span>
                        <div class="versions-container" id="versionsList"></div>
                    </div>

                    <!-- Tone Suggestions -->
                    <div class="enhancement-item" id="toneEnhanceSection">
                        <span class="enhancement-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="vertical-align: middle; margin-right: 4px;">
                                <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"/>
                            </svg>
                            Tone Suggestions:
                        </span>
                        <div class="tone-suggestions-container" id="toneEnhanceList"></div>
                    </div>

                    <!-- Clarity Score -->
                    <div class="enhancement-item" id="claritySection">
                        <span class="enhancement-label">Clarity Assessment:</span>
                        <div class="clarity-container">
                            <div class="clarity-bar">
                                <div class="clarity-fill" id="clarityFill"></div>
                            </div>
                            <span class="clarity-value" id="clarityValue">-</span>
                        </div>
                        <p class="clarity-note" id="clarityNote"></p>
                    </div>
                </div>
            </div>

            <!-- Email Translation Results Section -->
            <div class="email-section" id="emailSection">
                <div class="email-card">
                    <h3 class="email-title">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" width="20" height="20">
                            <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z" fill="currentColor"/>
                        </svg>
                        Email Translation
                    </h3>

                    <!-- Subject Line -->
                    <div class="email-item" id="subjectSection">
                        <span class="email-label">Subject Line:</span>
                        <div class="email-subject-box">
                            <span id="emailSubject"></span>
                            <button class="copy-section-btn" data-copy="subject" title="Copy subject">
                                <svg viewBox="0 0 24 24" width="14" height="14" fill="currentColor">
                                    <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <!-- Full Email Preview -->
                    <div class="email-item" id="emailPreviewSection">
                        <span class="email-label">Full Email (ready to copy):</span>
                        <div class="email-preview-box" id="emailPreview"></div>
                        <button class="copy-email-btn" id="copyEmailBtn" title="Copy entire email">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                            </svg>
                            Copy Email
                        </button>
                    </div>

                    <!-- Greeting Options -->
                    <div class="email-item" id="greetingSection">
                        <span class="email-label">Alternative Greetings:</span>
                        <div class="greeting-options" id="greetingOptions"></div>
                    </div>

                    <!-- Closing Options -->
                    <div class="email-item" id="closingSection">
                        <span class="email-label">Alternative Closings:</span>
                        <div class="closing-options" id="closingOptions"></div>
                    </div>

                    <!-- Tone Indicator -->
                    <div class="email-item" id="emailToneSection">
                        <span class="email-label">Email Tone:</span>
                        <div class="email-tone-badges" id="emailToneBadges"></div>
                    </div>

                    <!-- Alternative Versions -->
                    <div class="email-item" id="emailVersionsSection">
                        <span class="email-label">Alternative Versions:</span>
                        <div class="email-versions-container" id="emailVersionsList"></div>
                    </div>
                </div>
            </div>

            <!-- Alternatives & Context Section -->
            <div class="details-section" id="detailsSection">
                <div class="details-card">
                    <h3 class="details-title">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z" fill="currentColor"/>
                        </svg>
                        Translation Details
                    </h3>
                    
                    <!-- Formality Indicator -->
                    <div class="detail-item" id="formalitySection">
                        <span class="detail-label">Register:</span>
                        <span class="formality-badge" id="formalityBadge">-</span>
                    </div>

                    <!-- Alternative Translations -->
                    <div class="detail-item" id="alternativesSection">
                        <span class="detail-label">Alternative translations:</span>
                        <ul class="alternatives-list" id="alternativesList"></ul>
                    </div>

                    <!-- Cultural Notes -->
                    <div class="detail-item" id="culturalSection">
                        <span class="detail-label">Cultural context:</span>
                        <p class="cultural-note" id="culturalNote"></p>
                    </div>

                    <!-- Idiomatic Expression -->
                    <div class="detail-item" id="idiomSection">
                        <span class="detail-label">Idiomatic expression:</span>
                        <p class="idiom-note" id="idiomNote"></p>
                    </div>

                    <!-- Sentence Suggestions -->
                    <div class="detail-item" id="suggestionsSection">
                        <span class="detail-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="vertical-align: middle; margin-right: 4px;">
                                <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7z"/>
                            </svg>
                            ML-Powered Suggestions:
                        </span>
                        <div class="suggestions-container" id="suggestionsList"></div>
                    </div>

                    <!-- Grammar Analysis -->
                    <div class="detail-item" id="grammarSection">
                        <span class="detail-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="vertical-align: middle; margin-right: 4px;">
                                <path d="M12.45 16h2.09L9.43 3H7.57L2.46 16h2.09l1.12-3h5.64l1.14 3zm-6.02-5L8.5 5.48 10.57 11H6.43zm15.16.59l-8.09 8.09L9.83 16l-1.41 1.41 5.09 5.09L23 13l-1.41-1.41z"/>
                            </svg>
                            Grammar Analysis:
                        </span>
                        <div class="grammar-analysis" id="grammarAnalysis"></div>
                    </div>

                    <!-- Tone Analysis -->
                    <div class="detail-item" id="toneSection">
                        <span class="detail-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="vertical-align: middle; margin-right: 4px;">
                                <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"/>
                            </svg>
                            Tone & Sentiment:
                        </span>
                        <div class="tone-badges" id="toneBadges"></div>
                    </div>

                    <!-- Improvement Recommendations -->
                    <div class="detail-item" id="improvementsSection">
                        <span class="detail-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="vertical-align: middle; margin-right: 4px;">
                                <path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"/>
                            </svg>
                            Recommended Improvements:
                        </span>
                        <ul class="improvements-list" id="improvementsList"></ul>
                    </div>

                    <!-- Related Phrases -->
                    <div class="detail-item" id="relatedSection">
                        <span class="detail-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="vertical-align: middle; margin-right: 4px;">
                                <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
                            </svg>
                            Related Phrases:
                        </span>
                        <div class="related-phrases" id="relatedPhrases"></div>
                    </div>

                    <!-- Confidence Score -->
                    <div class="detail-item" id="confidenceSection">
                        <span class="detail-label">Translation Confidence:</span>
                        <div class="confidence-container">
                            <div class="confidence-bar">
                                <div class="confidence-fill" id="confidenceFill"></div>
                            </div>
                            <span class="confidence-value" id="confidenceValue">-</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Domain Insights Section -->
            <div class="insights-section" id="insightsSection">
                <div class="insights-card">
                    <h3 class="insights-title">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7z" fill="currentColor"/>
                        </svg>
                        Content Intelligence & Insights
                    </h3>

                    <!-- Detected Topic/Domain -->
                    <div class="insight-item" id="topicSection">
                        <span class="insight-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                            </svg>
                            Detected Domain:
                        </span>
                        <div class="topic-badges" id="topicBadges"></div>
                    </div>

                    <!-- Strategic Recommendations -->
                    <div class="insight-item" id="strategicSection">
                        <span class="insight-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                            </svg>
                            Strategic Recommendations:
                        </span>
                        <div class="strategic-list" id="strategicList"></div>
                    </div>

                    <!-- Alternative Approaches -->
                    <div class="insight-item" id="alternativeApproachesSection">
                        <span class="insight-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                <path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"/>
                            </svg>
                            Alternative Approaches to Consider:
                        </span>
                        <div class="approaches-container" id="approachesContainer"></div>
                    </div>

                    <!-- Key Concepts Explained -->
                    <div class="insight-item" id="conceptsSection">
                        <span class="insight-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                <path d="M12 2l-5.5 9h11L12 2zm0 3.84L13.93 9h-3.87L12 5.84zM17.5 13c-2.49 0-4.5 2.01-4.5 4.5s2.01 4.5 4.5 4.5 4.5-2.01 4.5-4.5-2.01-4.5-4.5-4.5zm0 7c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5zM3 21.5h8v-8H3v8zm2-6h4v4H5v-4z"/>
                            </svg>
                            Key Concepts Explained:
                        </span>
                        <div class="concepts-grid" id="conceptsGrid"></div>
                    </div>

                    <!-- Industry Context -->
                    <div class="insight-item" id="industryContextSection">
                        <span class="insight-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                <path d="M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z"/>
                            </svg>
                            Industry Context:
                        </span>
                        <p class="industry-context" id="industryContext"></p>
                    </div>

                    <!-- Best Practices -->
                    <div class="insight-item" id="bestPracticesSection">
                        <span class="insight-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                            </svg>
                            Best Practices & Tips:
                        </span>
                        <ul class="best-practices-list" id="bestPracticesList"></ul>
                    </div>

                    <!-- Further Research Suggestions -->
                    <div class="insight-item" id="researchSection">
                        <span class="insight-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                            </svg>
                            Suggested Further Research:
                        </span>
                        <div class="research-topics" id="researchTopics"></div>
                    </div>

                    <!-- Contextual Questions -->
                    <div class="insight-item" id="questionsSection">
                        <span class="insight-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                <path d="M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"/>
                            </svg>
                            Questions to Consider:
                        </span>
                        <ul class="questions-list" id="questionsList"></ul>
                    </div>
                </div>
            </div>

            <!-- Expanded Context & Examples Section -->
            <div class="expanded-section" id="expandedSection">
                <div class="expanded-card">
                    <h3 class="expanded-title">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z" fill="currentColor"/>
                        </svg>
                        Expanded Context & Practical Examples
                    </h3>

                    <!-- Practical Examples -->
                    <div class="expanded-item" id="practicalExamplesSection">
                        <span class="expanded-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                            </svg>
                            Practical Examples:
                        </span>
                        <div class="examples-container" id="examplesContainer"></div>
                    </div>

                    <!-- Real-World Scenarios -->
                    <div class="expanded-item" id="scenariosSection">
                        <span class="expanded-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                <path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H3V5h18v14zM9 8h2v6H9zm4 0h2v6h-2z"/>
                            </svg>
                            Real-World Scenarios:
                        </span>
                        <div class="scenarios-container" id="scenariosContainer"></div>
                    </div>

                    <!-- Calculation Examples -->
                    <div class="expanded-item" id="calculationsSection">
                        <span class="expanded-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 14h-2v-4H9V7h2v4h2V7h2v10z"/>
                            </svg>
                            Calculations & Formulas:
                        </span>
                        <div class="calculations-container" id="calculationsContainer"></div>
                    </div>

                    <!-- Industry Benchmarks -->
                    <div class="expanded-item" id="benchmarksSection">
                        <span class="expanded-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                <path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"/>
                            </svg>
                            Industry Benchmarks & Standards:
                        </span>
                        <div class="benchmarks-container" id="benchmarksContainer"></div>
                    </div>

                    <!-- Implementation Steps -->
                    <div class="expanded-item" id="implementationSection">
                        <span class="expanded-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                <path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/>
                            </svg>
                            Implementation Steps:
                        </span>
                        <div class="implementation-steps" id="implementationSteps"></div>
                    </div>

                    <!-- Case Study Examples -->
                    <div class="expanded-item" id="caseStudySection">
                        <span class="expanded-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                <path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-6 10H6v-2h8v2zm4-4H6v-2h12v2z"/>
                            </svg>
                            Case Study Examples:
                        </span>
                        <div class="case-studies-container" id="caseStudiesContainer"></div>
                    </div>

                    <!-- Common Pitfalls -->
                    <div class="expanded-item" id="pitfallsSection">
                        <span class="expanded-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                <path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/>
                            </svg>
                            Common Pitfalls to Avoid:
                        </span>
                        <ul class="pitfalls-list" id="pitfallsList"></ul>
                    </div>

                    <!-- Related Metrics -->
                    <div class="expanded-item" id="metricsSection">
                        <span class="expanded-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
                            </svg>
                            Key Metrics & KPIs:
                        </span>
                        <div class="metrics-grid" id="metricsGrid"></div>
                    </div>

                    <!-- Templates & Tools -->
                    <div class="expanded-item" id="templatesSection">
                        <span class="expanded-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                            </svg>
                            Templates & Tools:
                        </span>
                        <div class="templates-container" id="templatesContainer"></div>
                    </div>
                </div>
            </div>

            <!-- AI Agent Results Section -->
            <div class="agent-section" id="agentSection">
                <div class="agent-card">
                    <h3 class="agent-title">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" width="20" height="20">
                            <path d="M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79s7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58s9.14-3.47 12.65 0L21 3v7.12zM12.5 8v4.25l3.5 2.08-.72 1.21L11 13V8h1.5z" fill="currentColor"/>
                        </svg>
                        AI Strategic Advisor
                    </h3>
                    <p class="agent-subtitle">Structured analysis with enhancement ideas, strategic timelines, and probing questions to continue the conversation</p>

                    <!-- Answer Section -->
                    <div class="agent-item" id="answerSection">
                        <span class="agent-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="vertical-align: middle; margin-right: 4px;">
                                <path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z"/>
                            </svg>
                            Summary:
                        </span>
                        <div class="agent-answer" id="agentAnswer"></div>
                    </div>

                    <!-- Improved Version Section - Copy Ready -->
                    <div class="agent-item" id="improvedVersionSection">
                        <div class="improved-version-header">
                            <span class="agent-label">
                                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="vertical-align: middle; margin-right: 4px;">
                                    <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                                </svg>
                                ‚ú® Improved Version (Copy & Use):
                            </span>
                            <button class="copy-improved-btn" id="copyImprovedBtn" title="Copy improved version">
                                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                    <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                                </svg>
                                Copy
                            </button>
                        </div>
                        <div class="improved-version-content" id="improvedVersionContent"></div>
                    </div>

                    <!-- Confidence Score -->
                    <div class="agent-item" id="agentConfidenceSection">
                        <span class="agent-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="vertical-align: middle; margin-right: 4px;">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                            </svg>
                            Confidence Level:
                        </span>
                        <div class="confidence-container">
                            <div class="confidence-bar">
                                <div class="confidence-fill" id="confidenceFillAgent"></div>
                            </div>
                            <span class="confidence-value" id="confidenceValueAgent">0%</span>
                        </div>
                        <div class="confidence-explanation" id="confidenceExplanation"></div>
                    </div>

                    <!-- Strategic Analysis -->
                    <div class="agent-item" id="keyInsightsSection">
                        <span class="agent-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="vertical-align: middle; margin-right: 4px;">
                                <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7z"/>
                            </svg>
                            Strategic Analysis:
                        </span>
                        <div class="strategic-analysis-container" id="keyInsightsList"></div>
                    </div>

                    <!-- Key Metrics -->
                    <div class="agent-item" id="sourcesSection">
                        <span class="agent-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="vertical-align: middle; margin-right: 4px;">
                                <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
                            </svg>
                            Key Metrics & KPIs:
                        </span>
                        <div class="sources-container" id="sourcesList"></div>
                    </div>

                    <!-- Enhancement Ideas -->
                    <div class="agent-item" id="practicalSection">
                        <span class="agent-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="vertical-align: middle; margin-right: 4px;">
                                <path d="M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3h7zM7 9H4V5h3v4zm10 6h3v4h-3v-4zm0-10h3v4h-3V5z"/>
                            </svg>
                            Enhancement Ideas:
                        </span>
                        <div class="practical-content" id="practicalContent"></div>
                    </div>

                    <!-- Strategic Timeline -->
                    <div class="agent-item" id="quickFactsSection">
                        <span class="agent-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="vertical-align: middle; margin-right: 4px;">
                                <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/>
                            </svg>
                            Strategic Timeline:
                        </span>
                        <div class="quick-facts-container" id="quickFactsList"></div>
                    </div>

                    <!-- Risk Considerations -->
                    <div class="agent-item" id="nuancesSection">
                        <span class="agent-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="vertical-align: middle; margin-right: 4px;">
                                <path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/>
                            </svg>
                            Risk Considerations:
                        </span>
                        <div class="nuances-container" id="nuancesList"></div>
                    </div>

                    <!-- Implementation Checklist -->
                    <div class="agent-item" id="misconceptionsSection">
                        <span class="agent-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="vertical-align: middle; margin-right: 4px;">
                                <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                            </svg>
                            Implementation Checklist:
                        </span>
                        <div class="misconceptions-container" id="misconceptionsList"></div>
                    </div>

                    <!-- Additional Considerations -->
                    <div class="agent-item" id="expertSection">
                        <span class="agent-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="vertical-align: middle; margin-right: 4px;">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
                            </svg>
                            Additional Considerations:
                        </span>
                        <div class="expert-content" id="expertContent"></div>
                    </div>

                    <!-- Probing Questions -->
                    <div class="agent-item" id="relatedQuestionsSection">
                        <span class="agent-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="vertical-align: middle; margin-right: 4px;">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"/>
                            </svg>
                            Continue the Conversation:
                        </span>
                        <div class="related-questions-container" id="relatedQuestionsList"></div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="agent-actions">
                        <button class="copy-agent-btn" id="copyAgentBtn" title="Copy entire response">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                            </svg>
                            Copy Full Response
                        </button>
                        <button class="clear-history-btn" id="clearAgentHistory" title="Clear conversation history">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                            </svg>
                            Clear History
                        </button>
                    </div>
                </div>
            </div>

            <!-- Strategy AI Agent Results Section -->
            <div class="strategy-section" id="strategySection">
                <div class="strategy-card">
                    <h3 class="strategy-title">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" width="20" height="20">
                            <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z" fill="currentColor"/>
                        </svg>
                        Strategy Refinement Agent
                    </h3>
                    <p class="strategy-subtitle">Annual strategy planning assistant for Matanuska Transport - South Africa/Zimbabwe operations</p>

                    <!-- Context Banner -->
                    <div class="strategy-context-banner" id="strategyContextBanner">
                        <div class="context-icon">üöõ</div>
                        <div class="context-info">
                            <strong>Transport Industry Context Active</strong>
                            <span>Tailored for South Africa/Zimbabwe logistics and fleet operations</span>
                        </div>
                    </div>

                    <!-- Summary Section -->
                    <div class="strategy-item" id="strategySummarySection">
                        <span class="strategy-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="vertical-align: middle; margin-right: 4px;">
                                <path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z"/>
                            </svg>
                            Analysis Summary:
                        </span>
                        <div class="strategy-summary" id="strategySummary"></div>
                    </div>

                    <!-- Refined Strategy Section - Copy Ready -->
                    <div class="strategy-item" id="refinedStrategySection">
                        <div class="refined-strategy-header">
                            <span class="strategy-label">
                                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="vertical-align: middle; margin-right: 4px;">
                                    <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                                </svg>
                                ‚ú® Refined Strategy (Copy & Use):
                            </span>
                            <button class="copy-refined-btn" id="copyRefinedBtn" title="Copy refined strategy">
                                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                    <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                                </svg>
                                Copy
                            </button>
                        </div>
                        <div class="refined-strategy-content" id="refinedStrategyContent"></div>
                    </div>

                    <!-- Original vs Refined Comparison -->
                    <div class="strategy-item" id="comparisonSection">
                        <span class="strategy-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="vertical-align: middle; margin-right: 4px;">
                                <path d="M10 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h5v2h2V1h-2v2zm0 15H5l5-6v6zm9-15h-5v2h5v13l-5-6v9h5c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/>
                            </svg>
                            Before & After Comparison:
                        </span>
                        <div class="comparison-container" id="comparisonContainer"></div>
                    </div>

                    <!-- Strategic Objectives Analysis -->
                    <div class="strategy-item" id="objectivesAnalysisSection">
                        <span class="strategy-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="vertical-align: middle; margin-right: 4px;">
                                <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                            </svg>
                            Strategic Objectives Review:
                        </span>
                        <div class="objectives-analysis" id="objectivesAnalysis"></div>
                    </div>

                    <!-- Clarity Improvements -->
                    <div class="strategy-item" id="clarityImprovementsSection">
                        <span class="strategy-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="vertical-align: middle; margin-right: 4px;">
                                <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7z"/>
                            </svg>
                            Clarity & Conciseness Improvements:
                        </span>
                        <div class="clarity-improvements" id="clarityImprovements"></div>
                    </div>

                    <!-- Transport Industry Alignment -->
                    <div class="strategy-item" id="industryAlignmentSection">
                        <span class="strategy-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="vertical-align: middle; margin-right: 4px;">
                                <path d="M18 18.5c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5-1.5.67-1.5 1.5.67 1.5 1.5 1.5zM19.5 9.5l1.96 2.5H17V9.5h2.5zM6 18.5c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5-1.5.67-1.5 1.5.67 1.5 1.5 1.5zM20 8l3 4v5h-2c0 1.66-1.34 3-3 3s-3-1.34-3-3H9c0 1.66-1.34 3-3 3s-3-1.34-3-3H1V6c0-1.11.89-2 2-2h14v4h3z"/>
                            </svg>
                            Transport Industry Alignment:
                        </span>
                        <div class="industry-alignment" id="industryAlignment"></div>
                    </div>

                    <!-- Budget Implications -->
                    <div class="strategy-item" id="budgetImplicationsSection">
                        <span class="strategy-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="vertical-align: middle; margin-right: 4px;">
                                <path d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"/>
                            </svg>
                            Budget Considerations:
                        </span>
                        <div class="budget-implications" id="budgetImplications"></div>
                    </div>

                    <!-- Regional Considerations (SA/Zimbabwe) -->
                    <div class="strategy-item" id="regionalSection">
                        <span class="strategy-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="vertical-align: middle; margin-right: 4px;">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                            </svg>
                            Regional Considerations (SA/Zimbabwe):
                        </span>
                        <div class="regional-considerations" id="regionalConsiderations"></div>
                    </div>

                    <!-- Action Items -->
                    <div class="strategy-item" id="strategyActionsSection">
                        <span class="strategy-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="vertical-align: middle; margin-right: 4px;">
                                <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                            </svg>
                            Refined Action Items:
                        </span>
                        <div class="strategy-actions" id="strategyActions"></div>
                    </div>

                    <!-- Follow-up Questions -->
                    <div class="strategy-item" id="strategyQuestionsSection">
                        <span class="strategy-label">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="vertical-align: middle; margin-right: 4px;">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"/>
                            </svg>
                            Refine Further - Ask Questions:
                        </span>
                        <div class="strategy-questions-container" id="strategyQuestionsList"></div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="strategy-actions-btns">
                        <button class="copy-strategy-btn" id="copyStrategyBtn" title="Copy entire strategy analysis">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                            </svg>
                            Copy Full Analysis
                        </button>
                        <button class="clear-strategy-btn" id="clearStrategyHistory" title="Clear strategy history">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                            </svg>
                            Clear History
                        </button>
                    </div>
                </div>
            </div>

            <!-- Feedback Section -->
            <div class="feedback-section" id="feedbackSection">
                <p>Was this translation helpful?</p>
                <div class="feedback-buttons">
                    <button class="feedback-btn" id="feedbackGood" data-rating="good">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z" fill="currentColor"/>
                        </svg>
                        Good
                    </button>
                    <button class="feedback-btn" id="feedbackBad" data-rating="bad">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2zm4 0v12h4V3h-4z" fill="currentColor"/>
                        </svg>
                        Needs improvement
                    </button>
                </div>
                <div class="feedback-thanks" id="feedbackThanks">
                    Thank you for your feedback! This helps improve our translations.
                </div>
            </div>
        </main>

        <!-- API Key Modal -->
        <div class="modal" id="apiKeyModal">
            <div class="modal-content modal-content-large">
                <h2>ü§ñ AI Model Settings</h2>
                <p class="modal-subtitle">Choose your preferred AI provider and model for translations and analysis</p>
                
                <!-- Provider Selection -->
                <div class="provider-section">
                    <label class="section-label">Select AI Provider</label>
                    <div class="provider-tabs" id="providerTabs">
                        <button class="provider-tab active" data-provider="openrouter">
                            <span class="provider-icon">üåê</span>
                            <span class="provider-name">OpenRouter</span>
                            <span class="provider-badge">Recommended</span>
                        </button>
                        <button class="provider-tab" data-provider="anthropic">
                            <span class="provider-icon">üß†</span>
                            <span class="provider-name">Anthropic</span>
                            <span class="provider-badge new">Direct</span>
                        </button>
                        <button class="provider-tab" data-provider="openai">
                            <span class="provider-icon">‚ö°</span>
                            <span class="provider-name">OpenAI</span>
                        </button>
                        <button class="provider-tab" data-provider="google">
                            <span class="provider-icon">üîÆ</span>
                            <span class="provider-name">Google Gemini</span>
                            <span class="provider-badge new">New</span>
                        </button>
                        <button class="provider-tab" data-provider="deepseek">
                            <span class="provider-icon">üîç</span>
                            <span class="provider-name">DeepSeek</span>
                        </button>
                        <button class="provider-tab" data-provider="grok">
                            <span class="provider-icon">ü§ñ</span>
                            <span class="provider-name">Grok (xAI)</span>
                            <span class="provider-badge new">New</span>
                        </button>
                        <button class="provider-tab" data-provider="morph">
                            <span class="provider-icon">ü¶ã</span>
                            <span class="provider-name">Morph AI</span>
                            <span class="provider-badge new">New</span>
                        </button>
                        <button class="provider-tab" data-provider="groq">
                            <span class="provider-icon">‚ö°</span>
                            <span class="provider-name">Groq</span>
                            <span class="provider-badge free">Free</span>
                        </button>
                        <button class="provider-tab" data-provider="together">
                            <span class="provider-icon">ü§ù</span>
                            <span class="provider-name">Together AI</span>
                            <span class="provider-badge free">Free</span>
                        </button>
                        <button class="provider-tab" data-provider="ollama">
                            <span class="provider-icon">ü¶ô</span>
                            <span class="provider-name">Ollama</span>
                            <span class="provider-badge free">Local</span>
                        </button>
                    </div>
                </div>
                
                <!-- OpenRouter Section -->
                <div class="provider-content active" id="openrouterSection">
                    <div class="model-select-group">
                        <label for="openrouterModelSelect">Select Model</label>
                        <select id="openrouterModelSelect" class="model-select">
                            <optgroup label="üèÜ Top Tier - Best Quality">
                                <option value="anthropic/claude-sonnet-4">Claude Sonnet 4 (Latest)</option>
                                <option value="anthropic/claude-3.5-sonnet" selected>Claude 3.5 Sonnet (Recommended)</option>
                                <option value="anthropic/claude-3.5-sonnet-20241022">Claude 3.5 Sonnet (Oct 2024)</option>
                                <option value="anthropic/claude-3-opus">Claude 3 Opus (Most Capable)</option>
                                <option value="openai/gpt-4o">GPT-4o</option>
                                <option value="openai/gpt-4-turbo">GPT-4 Turbo</option>
                                <option value="google/gemini-pro-1.5">Gemini Pro 1.5</option>
                                <option value="google/gemini-2.0-flash-001">Gemini 2.0 Flash</option>
                            </optgroup>
                            <optgroup label="‚ö° Fast & Efficient">
                                <option value="anthropic/claude-3.5-haiku">Claude 3.5 Haiku (Fast)</option>
                                <option value="anthropic/claude-3-haiku">Claude 3 Haiku</option>
                                <option value="openai/gpt-4o-mini">GPT-4o Mini</option>
                                <option value="google/gemini-flash-1.5">Gemini Flash 1.5</option>
                                <option value="meta-llama/llama-3.1-70b-instruct">Llama 3.1 70B</option>
                                <option value="meta-llama/llama-3.1-8b-instruct">Llama 3.1 8B (Free)</option>
                            </optgroup>
                            <optgroup label="üßÆ Reasoning Models">
                                <option value="openai/o1-preview">OpenAI O1 Preview</option>
                                <option value="openai/o1-mini">OpenAI O1 Mini</option>
                                <option value="deepseek/deepseek-r1">DeepSeek R1 (Reasoning)</option>
                                <option value="deepseek/deepseek-chat">DeepSeek Chat</option>
                            </optgroup>
                            <optgroup label="üí∞ Budget Friendly">
                                <option value="mistralai/mistral-large">Mistral Large</option>
                                <option value="mistralai/mistral-medium">Mistral Medium</option>
                                <option value="mistralai/mistral-7b-instruct">Mistral 7B (Free)</option>
                                <option value="qwen/qwen-2.5-72b-instruct">Qwen 2.5 72B</option>
                                <option value="qwen/qwen-2.5-coder-32b-instruct">Qwen 2.5 Coder 32B</option>
                            </optgroup>
                        </select>
                        <p class="model-hint">üí° OpenRouter provides access to 100+ models with a single API key</p>
                    </div>
                    <div class="api-key-group">
                        <label for="apiKeyInput">OpenRouter API Key</label>
                        <div class="api-key-input-wrapper">
                            <input type="password" id="apiKeyInput" placeholder="sk-or-v1-..." class="api-key-input">
                            <button type="button" class="toggle-visibility-btn" data-target="apiKeyInput">üëÅÔ∏è</button>
                        </div>
                        <p class="api-hint">Get your free API key at <a href="https://openrouter.ai/keys" target="_blank">openrouter.ai/keys</a></p>
                    </div>
                </div>
                
                <!-- Anthropic Direct Section -->
                <div class="provider-content" id="anthropicSection">
                    <div class="model-select-group">
                        <label for="anthropicModelSelect">Select Claude Model</label>
                        <select id="anthropicModelSelect" class="model-select">
                            <optgroup label="üèÜ Claude 4 Series">
                                <option value="claude-sonnet-4-20250514">Claude Sonnet 4 (Latest)</option>
                            </optgroup>
                            <optgroup label="‚≠ê Claude 3.5 Series">
                                <option value="claude-3-5-sonnet-20241022" selected>Claude 3.5 Sonnet (Recommended)</option>
                                <option value="claude-3-5-haiku-20241022">Claude 3.5 Haiku (Fast)</option>
                            </optgroup>
                            <optgroup label="üî∑ Claude 3 Series">
                                <option value="claude-3-opus-20240229">Claude 3 Opus (Most Capable)</option>
                                <option value="claude-3-sonnet-20240229">Claude 3 Sonnet</option>
                                <option value="claude-3-haiku-20240307">Claude 3 Haiku</option>
                            </optgroup>
                        </select>
                        <p class="model-hint">‚ö†Ô∏è <strong>Note:</strong> Anthropic's API has CORS restrictions. For Claude models in browser, use <strong>OpenRouter</strong> instead.</p>
                    </div>
                    <div class="api-key-group">
                        <label for="anthropicKeyInput">Anthropic API Key</label>
                        <div class="api-key-input-wrapper">
                            <input type="password" id="anthropicKeyInput" placeholder="sk-ant-..." class="api-key-input">
                            <button type="button" class="toggle-visibility-btn" data-target="anthropicKeyInput">üëÅÔ∏è</button>
                        </div>
                        <p class="api-hint">Get your API key at <a href="https://console.anthropic.com/settings/keys" target="_blank">console.anthropic.com</a></p>
                    </div>
                </div>
                
                <!-- OpenAI Direct Section -->
                <div class="provider-content" id="openaiSection">
                    <div class="model-select-group">
                        <label for="openaiModelSelect">Select OpenAI Model</label>
                        <select id="openaiModelSelect" class="model-select">
                            <optgroup label="üöÄ GPT-5 Series (Latest)">
                                <option value="gpt-5" selected>GPT-5 (Most Capable)</option>
                                <option value="gpt-5-mini">GPT-5 Mini (Fast)</option>
                                <option value="gpt-5-nano">GPT-5 Nano (Fastest)</option>
                            </optgroup>
                            <optgroup label="üèÜ GPT-4.1 Series">
                                <option value="gpt-4.1">GPT-4.1</option>
                                <option value="gpt-4.1-mini">GPT-4.1 Mini</option>
                                <option value="gpt-4.1-nano">GPT-4.1 Nano</option>
                            </optgroup>
                            <optgroup label="‚ö° GPT-4 Series">
                                <option value="gpt-4o-2024-11-20">GPT-4o (Nov 2024)</option>
                                <option value="gpt-4-turbo">GPT-4 Turbo</option>
                                <option value="gpt-4">GPT-4</option>
                            </optgroup>
                            <optgroup label="üí∞ Budget Options">
                                <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
                            </optgroup>
                            <optgroup label="üß† Reasoning">
                                <option value="o3-mini-2025-01-31">O3 Mini (Reasoning)</option>
                            </optgroup>
                        </select>
                        <p class="model-hint">üöÄ You have access to GPT-5 - the most capable model!</p>
                    </div>
                    <div class="api-key-group">
                        <label for="openaiKeyInput">OpenAI API Key</label>
                        <div class="api-key-input-wrapper">
                            <input type="password" id="openaiKeyInput" placeholder="sk-..." class="api-key-input">
                            <button type="button" class="toggle-visibility-btn" data-target="openaiKeyInput">üëÅÔ∏è</button>
                        </div>
                        <p class="api-hint">Get your API key at <a href="https://platform.openai.com/api-keys" target="_blank">platform.openai.com</a></p>
                    </div>
                </div>
                
                <!-- Google Gemini Section -->
                <div class="provider-content" id="googleSection">
                    <div class="model-select-group">
                        <label for="googleModelSelect">Select Gemini Model</label>
                        <select id="googleModelSelect" class="model-select">
                            <optgroup label="üèÜ Gemini 2.0 Series">
                                <option value="gemini-2.0-flash" selected>Gemini 2.0 Flash (Latest)</option>
                                <option value="gemini-2.0-flash-lite">Gemini 2.0 Flash Lite</option>
                            </optgroup>
                            <optgroup label="‚≠ê Gemini 1.5 Series">
                                <option value="gemini-1.5-pro">Gemini 1.5 Pro (Most Capable)</option>
                                <option value="gemini-1.5-pro-latest">Gemini 1.5 Pro (Latest)</option>
                                <option value="gemini-1.5-flash">Gemini 1.5 Flash (Fast)</option>
                                <option value="gemini-1.5-flash-latest">Gemini 1.5 Flash (Latest)</option>
                                <option value="gemini-1.5-flash-8b">Gemini 1.5 Flash 8B (Fastest)</option>
                            </optgroup>
                            <optgroup label="üßÆ Experimental">
                                <option value="gemini-2.0-flash-thinking-exp">Gemini 2.0 Thinking (Experimental)</option>
                                <option value="learnlm-1.5-pro-experimental">LearnLM 1.5 Pro (Experimental)</option>
                            </optgroup>
                        </select>
                        <p class="model-hint">üîÆ Google AI - Excellent for multilingual and analytical tasks</p>
                    </div>
                    <div class="api-key-group">
                        <label for="googleKeyInput">Google AI API Key</label>
                        <div class="api-key-input-wrapper">
                            <input type="password" id="googleKeyInput" placeholder="AIza..." class="api-key-input">
                            <button type="button" class="toggle-visibility-btn" data-target="googleKeyInput">üëÅÔ∏è</button>
                        </div>
                        <p class="api-hint">Get your API key at <a href="https://aistudio.google.com/app/apikey" target="_blank">aistudio.google.com</a></p>
                    </div>
                </div>
                
                <!-- DeepSeek Section -->
                <div class="provider-content" id="deepseekSection">
                    <div class="model-select-group">
                        <label for="deepseekModelSelect">Select DeepSeek Model</label>
                        <select id="deepseekModelSelect" class="model-select">
                            <optgroup label="üßÆ Reasoning Models">
                                <option value="deepseek-reasoner" selected>DeepSeek Reasoner (R1)</option>
                            </optgroup>
                            <optgroup label="üí¨ Chat Models">
                                <option value="deepseek-chat">DeepSeek Chat (V3)</option>
                            </optgroup>
                        </select>
                        <p class="model-hint">üîç DeepSeek - Excellent reasoning at low cost</p>
                    </div>
                    <div class="api-key-group">
                        <label for="deepseekKeyInput">DeepSeek API Key</label>
                        <div class="api-key-input-wrapper">
                            <input type="password" id="deepseekKeyInput" placeholder="sk-..." class="api-key-input">
                            <button type="button" class="toggle-visibility-btn" data-target="deepseekKeyInput">üëÅÔ∏è</button>
                        </div>
                        <p class="api-hint">Get your API key at <a href="https://platform.deepseek.com/api_keys" target="_blank">platform.deepseek.com</a></p>
                    </div>
                </div>
                
                <!-- Grok (xAI) Section -->
                <div class="provider-content" id="grokSection">
                    <div class="model-select-group">
                        <label for="grokModelSelect">Select Grok Model</label>
                        <select id="grokModelSelect" class="model-select">
                            <optgroup label="üöÄ Latest Models">
                                <option value="grok-3-latest" selected>Grok 3 Latest (Most Capable)</option>
                                <option value="grok-3-fast-latest">Grok 3 Fast Latest</option>
                            </optgroup>
                            <optgroup label="‚ö° Grok 2 Series">
                                <option value="grok-2-latest">Grok 2 Latest</option>
                                <option value="grok-2-1212">Grok 2 (Dec 2024)</option>
                            </optgroup>
                            <optgroup label="üñºÔ∏è Vision Models">
                                <option value="grok-2-vision-1212">Grok 2 Vision (Dec 2024)</option>
                                <option value="grok-vision-beta">Grok Vision Beta</option>
                            </optgroup>
                            <optgroup label="üí¨ Chat Models">
                                <option value="grok-beta">Grok Beta</option>
                            </optgroup>
                        </select>
                        <p class="model-hint">ü§ñ xAI's Grok - Witty, real-time knowledge, excellent reasoning</p>
                    </div>
                    <div class="api-key-group">
                        <label for="grokKeyInput">xAI API Key</label>
                        <div class="api-key-input-wrapper">
                            <input type="password" id="grokKeyInput" placeholder="xai-..." class="api-key-input">
                            <button type="button" class="toggle-visibility-btn" data-target="grokKeyInput">üëÅÔ∏è</button>
                        </div>
                        <p class="api-hint">Get your API key at <a href="https://console.x.ai/" target="_blank">console.x.ai</a></p>
                    </div>
                </div>
                
                <!-- Morph AI Section -->
                <div class="provider-content" id="morphSection">
                    <div class="model-select-group">
                        <label for="morphModelSelect">Select Morph Model</label>
                        <select id="morphModelSelect" class="model-select">
                            <optgroup label="ü¶ã Morph Models">
                                <option value="morph-v2" selected>Morph V2 (Latest)</option>
                                <option value="morph-v2-fast">Morph V2 Fast</option>
                                <option value="morph-v1">Morph V1</option>
                            </optgroup>
                            <optgroup label="üíª Code Models">
                                <option value="morph-coder-v2">Morph Coder V2</option>
                                <option value="morph-coder-v1">Morph Coder V1</option>
                            </optgroup>
                        </select>
                        <p class="model-hint">ü¶ã Morph AI - Powerful language models</p>
                    </div>
                    <div class="api-key-group">
                        <label for="morphKeyInput">Morph AI API Key</label>
                        <div class="api-key-input-wrapper">
                            <input type="password" id="morphKeyInput" placeholder="morph-..." class="api-key-input">
                            <button type="button" class="toggle-visibility-btn" data-target="morphKeyInput">üëÅÔ∏è</button>
                        </div>
                        <p class="api-hint">Get your API key at <a href="https://morphllm.com/" target="_blank">morphllm.com</a></p>
                    </div>
                </div>
                
                <!-- Groq Section (FREE) -->
                <div class="provider-content" id="groqSection">
                    <div class="free-tier-banner">
                        <span class="free-icon">üéâ</span>
                        <span class="free-text">FREE - Fast inference with generous limits!</span>
                    </div>
                    <div class="model-select-group">
                        <label for="groqModelSelect">Select Groq Model</label>
                        <select id="groqModelSelect" class="model-select">
                            <optgroup label="ü¶ô Llama Models (Best)">
                                <option value="llama-3.3-70b-versatile" selected>Llama 3.3 70B Versatile (Best)</option>
                                <option value="llama-3.1-8b-instant">Llama 3.1 8B Instant (Fastest)</option>
                            </optgroup>
                            <optgroup label="üåô Other Models">
                                <option value="qwen/qwen3-32b">Qwen 3 32B</option>
                                <option value="moonshotai/kimi-k2-instruct">Kimi K2 Instruct</option>
                                <option value="deepseek-r1-distill-llama-70b">DeepSeek R1 Distill 70B</option>
                            </optgroup>
                        </select>
                        <p class="model-hint">‚ö° Groq - Lightning-fast free inference (up to ~6000 tokens/min)</p>
                    </div>
                    <div class="api-key-group">
                        <label for="groqKeyInput">Groq API Key</label>
                        <div class="api-key-input-wrapper">
                            <input type="password" id="groqKeyInput" placeholder="gsk_..." class="api-key-input">
                            <button type="button" class="toggle-visibility-btn" data-target="groqKeyInput">üëÅÔ∏è</button>
                        </div>
                        <p class="api-hint">Get your FREE API key at <a href="https://console.groq.com/keys" target="_blank">console.groq.com</a></p>
                    </div>
                </div>
                
                <!-- Together AI Section (FREE tier) -->
                <div class="provider-content" id="togetherSection">
                    <div class="free-tier-banner">
                        <span class="free-icon">üéÅ</span>
                        <span class="free-text">FREE $25 credits on signup!</span>
                    </div>
                    <div class="model-select-group">
                        <label for="togetherModelSelect">Select Together AI Model</label>
                        <select id="togetherModelSelect" class="model-select">
                            <optgroup label="ü¶ô Llama Models">
                                <option value="meta-llama/Llama-3.3-70B-Instruct-Turbo" selected>Llama 3.3 70B Turbo (Best)</option>
                                <option value="meta-llama/Llama-3.2-3B-Instruct-Turbo">Llama 3.2 3B Turbo (Fast)</option>
                                <option value="meta-llama/Llama-3.1-405B-Instruct-Turbo">Llama 3.1 405B (Most Capable)</option>
                                <option value="meta-llama/Llama-3.1-70B-Instruct-Turbo">Llama 3.1 70B Turbo</option>
                            </optgroup>
                            <optgroup label="üîÄ Mixtral Models">
                                <option value="mistralai/Mixtral-8x7B-Instruct-v0.1">Mixtral 8x7B Instruct</option>
                                <option value="mistralai/Mixtral-8x22B-Instruct-v0.1">Mixtral 8x22B Instruct</option>
                            </optgroup>
                            <optgroup label="üåü Qwen Models">
                                <option value="Qwen/Qwen2.5-72B-Instruct-Turbo">Qwen 2.5 72B Turbo</option>
                                <option value="Qwen/Qwen2.5-7B-Instruct-Turbo">Qwen 2.5 7B Turbo (Fast)</option>
                            </optgroup>
                            <optgroup label="üîç DeepSeek Models">
                                <option value="deepseek-ai/DeepSeek-R1-Distill-Llama-70B">DeepSeek R1 Distill 70B</option>
                                <option value="deepseek-ai/DeepSeek-V3">DeepSeek V3</option>
                            </optgroup>
                        </select>
                        <p class="model-hint">ü§ù Together AI - Access to 100+ models with free credits</p>
                    </div>
                    <div class="api-key-group">
                        <label for="togetherKeyInput">Together AI API Key</label>
                        <div class="api-key-input-wrapper">
                            <input type="password" id="togetherKeyInput" placeholder="..." class="api-key-input">
                            <button type="button" class="toggle-visibility-btn" data-target="togetherKeyInput">üëÅÔ∏è</button>
                        </div>
                        <p class="api-hint">Get FREE $25 credits at <a href="https://api.together.xyz/settings/api-keys" target="_blank">api.together.xyz</a></p>
                    </div>
                </div>
                
                <!-- Ollama Section (LOCAL - FREE) -->
                <div class="provider-content" id="ollamaSection">
                    <div class="free-tier-banner">
                        <span class="free-icon">ü¶ô</span>
                        <span class="free-text">100% FREE - Runs locally on your computer!</span>
                    </div>
                    <div class="model-select-group">
                        <label for="ollamaModelSelect">Select Ollama Model</label>
                        <select id="ollamaModelSelect" class="model-select">
                            <optgroup label="ü¶ô Llama Models">
                                <option value="llama3.2" selected>Llama 3.2 (3B - Recommended)</option>
                                <option value="llama3.2:1b">Llama 3.2 (1B - Fastest)</option>
                                <option value="llama3.1">Llama 3.1 (8B)</option>
                                <option value="llama3.1:70b">Llama 3.1 (70B - Best Quality)</option>
                            </optgroup>
                            <optgroup label="üåÄ Mistral Models">
                                <option value="mistral">Mistral (7B)</option>
                                <option value="mistral-nemo">Mistral Nemo (12B)</option>
                            </optgroup>
                            <optgroup label="üåü Qwen Models">
                                <option value="qwen2.5">Qwen 2.5 (7B)</option>
                                <option value="qwen2.5:14b">Qwen 2.5 (14B)</option>
                                <option value="qwen2.5:32b">Qwen 2.5 (32B)</option>
                            </optgroup>
                            <optgroup label="üíé Other Models">
                                <option value="gemma2">Gemma 2 (9B)</option>
                                <option value="phi3">Phi-3 (3.8B - Microsoft)</option>
                                <option value="deepseek-r1:7b">DeepSeek R1 (7B)</option>
                            </optgroup>
                        </select>
                        <p class="model-hint">ü¶ô Ollama - Run AI models locally (requires <a href="https://ollama.com" target="_blank">Ollama</a> installed)</p>
                    </div>
                    <div class="api-key-group">
                        <label for="ollamaUrlInput">Ollama Server URL</label>
                        <div class="api-key-input-wrapper">
                            <input type="text" id="ollamaUrlInput" placeholder="http://localhost:11434" value="http://localhost:11434" class="api-key-input">
                        </div>
                        <p class="api-hint">Default: http://localhost:11434 - Install Ollama from <a href="https://ollama.com/download" target="_blank">ollama.com</a></p>
                    </div>
                </div>
                
                <!-- Current Selection Display -->
                <div class="current-selection" id="currentSelection">
                    <span class="selection-label">Selected:</span>
                    <span class="selection-value" id="selectionDisplay">OpenRouter - Claude 3.5 Sonnet</span>
                </div>
                
                <!-- Auto-Fallback Settings -->
                <div class="fallback-settings">
                    <div class="fallback-toggle-row">
                        <div class="fallback-info">
                            <label class="fallback-label">üîÑ Auto-Fallback Mode</label>
                            <p class="fallback-hint">Automatically switch to backup models when rate limits or errors occur</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="fallbackToggle" checked aria-label="Enable auto-fallback mode">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="fallback-toggle-row">
                        <div class="fallback-info">
                            <label class="fallback-label">üî≤ High Contrast Mode</label>
                            <p class="fallback-hint">Enhanced visibility for users with visual impairments</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="highContrastToggle" aria-label="Enable high contrast mode">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="fallback-status" id="fallbackStatus">
                        <span class="status-label">Model Health:</span>
                        <span class="status-value" id="modelHealthDisplay">All models available</span>
                        <button class="reset-health-btn" id="resetHealthBtn" title="Reset model health tracking" aria-label="Reset model health tracking">‚Üª Reset</button>
                    </div>
                </div>
                
                <div class="modal-buttons">
                    <button class="modal-btn secondary" id="cancelApiKey">Cancel</button>
                    <button class="modal-btn primary" id="saveApiKey">
                        <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="margin-right: 6px;">
                            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                        </svg>
                        Save Settings
                    </button>
                </div>
                <p class="api-note">üîí Your API keys are stored securely in your browser's local storage and never sent to external servers.</p>
            </div>
        </div>

        <!-- Settings Button -->
        <button class="settings-btn" id="settingsBtn" title="API Settings">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z" fill="currentColor"/>
            </svg>
        </button>

        <footer class="footer">
            <p>Powered by AI ‚Ä¢ Translations may vary based on context</p>
        </footer>
    </div>

    <!-- Recording indicator -->
    <div class="recording-indicator" id="recordingIndicator">
        <div class="recording-pulse"></div>
        <span>Listening...</span>
    </div>

    <!-- Toast notifications -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Keyboard Shortcuts Modal -->
    <div class="keyboard-shortcuts-modal" id="keyboardShortcutsModal">
        <div class="shortcuts-content">
            <div class="shortcuts-header">
                <h3>‚å®Ô∏è Keyboard Shortcuts</h3>
                <button class="close-shortcuts-btn" id="closeShortcutsBtn">√ó</button>
            </div>
            <div class="shortcuts-list">
                <div class="shortcut-item">
                    <span class="shortcut-description">New conversation</span>
                    <div class="shortcut-keys">
                        <kbd>Ctrl</kbd><kbd>N</kbd>
                    </div>
                </div>
                <div class="shortcut-item">
                    <span class="shortcut-description">Toggle sidebar</span>
                    <div class="shortcut-keys">
                        <kbd>Ctrl</kbd><kbd>B</kbd>
                    </div>
                </div>
                <div class="shortcut-item">
                    <span class="shortcut-description">Search conversations</span>
                    <div class="shortcut-keys">
                        <kbd>Ctrl</kbd><kbd>K</kbd>
                    </div>
                </div>
                <div class="shortcut-item">
                    <span class="shortcut-description">Toggle dark mode</span>
                    <div class="shortcut-keys">
                        <kbd>Ctrl</kbd><kbd>D</kbd>
                    </div>
                </div>
                <div class="shortcut-item">
                    <span class="shortcut-description">Send message</span>
                    <div class="shortcut-keys">
                        <kbd>Ctrl</kbd><kbd>Enter</kbd>
                    </div>
                </div>
                <div class="shortcut-item">
                    <span class="shortcut-description">Open commands menu</span>
                    <div class="shortcut-keys">
                        <kbd>/</kbd>
                    </div>
                </div>
                <div class="shortcut-item">
                    <span class="shortcut-description">Show shortcuts</span>
                    <div class="shortcut-keys">
                        <kbd>Ctrl</kbd><kbd>?</kbd>
                    </div>
                </div>
                <div class="shortcut-item">
                    <span class="shortcut-description">Stop generation / Close</span>
                    <div class="shortcut-keys">
                        <kbd>Esc</kbd>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="app.js"></script>
</body>
</html>
